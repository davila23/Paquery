<section id="admin-package-detail-view" class="page-view">
    <div class="ng-scope">
        <div class="card" id="profile-main">
            <div class="card-header bgm-bluegray" style="z-index:1;">
                <h2>Informacion del Paquete <small>Verifica la información de tu paquete</small></h2>
            </div>
            <div class="pm-body clearfix">
                <div class="pm-overview c-overflow mCustomScrollbar _mCS_1 mCS-autoHide mCS_no_scrollbar" style="overflow: visible;">
                    <div id="mCSB_1" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" tabindex="0">
                        <div id="mCSB_1_container" class="mCSB_container mCS_x_hidden mCS_no_scrollbar_x mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr">
                            <div class="pmo-pic" style="margin-top:8em;">
                            </div>
                        </div>
                    </div>
                </div>
                <data class="ng-scope">
                    <div class="pmb-block ng-scope">
                        <div class="pmbb-header">
                            <h2><i class="zmdi zmdi-person m-r-5"></i> Información del paquete</h2>
                        </div>
                        <div class="pmbb-body p-l-30">
                            <form class="pmbb-edit">
                                <dl class="dl-horizontal">
                                    <dt class="p-t-10">Artículo</dt>
                                    <dd>
                                        <div class="fg-line">
                                            <input data-ng-model="vm.package.caption" type="text" class="form-control" ng-disabled="vm.checkDisabled()">
                                        </div>
                                    </dd>
                                </dl>
                                <dl class="dl-horizontal">
                                    <dt class="p-t-10">Estado</dt>
                                    <dd>
                                        <select ng-if="vm.disablePackageStatus" class="form-control w-100" ng-model="vm.package.currentPackageStatus" ng-options="packageStatus.name for packageStatus in vm.packagesStatus track by packageStatus.value" disabled ng-cloack></select>
                                        <select ng-if="!vm.disablePackageStatus" chosen class="form-control w-100" ng-model="vm.package.currentPackageStatus" ng-options="packageStatus.name for packageStatus in vm.packagesStatus track by packageStatus.value" ng-cloack></select>
                                    </dd>
                                </dl>
                                <dl class="dl-horizontal" ng-if="vm.isCanceled()">
                                    <dt class="p-t-10">Motivo</dt>
                                    <dd>
                                        <div class="fg-line">
                                            <input data-ng-model="vm.package.reason" type="text" class="form-control" required>
                                        </div>
                                    </dd>
                                </dl>
                                <dl class="dl-horizontal">
                                    <dt class="p-t-10">Tamaño</dt>
                                    <dd>
                                        <select class="form-control w-100" chosen ng-model="vm.package.packageSize" ng-options="packageSize.name for packageSize in vm.packageSizes track by packageSize.value" ng-cloack ng-disabled="vm.checkDisabled()"></select>
                                    </dd>
                                </dl>
                                <dl ng-if="vm.showRateInput" class="dl-horizontal">
                                    <dt class="p-t-10">Precio</dt>
                                    <dd>
                                        <div class="fg-line">
                                            <input data-ng-model="vm.packageRate" type="number" class="form-control" ng-disabled="vm.disableRateInput">
                                        </div>
                                    </dd>
                                </dl>
                                <dl class="dl-horizontal">
                                    <dt class="p-t-10">Tipo</dt>
                                    <dd>
                                        <select class="form-control w-100" ng-model="vm.package.currentType" ng-options="packageType.name for packageType in vm.packagesTypes track by packageType.value" disabled></select>
                                    </dd>
                                </dl>
                                <dl class="dl-horizontal">
                                    <dt class="p-t-10">Comentarios</dt>
                                    <dd>
                                        <div class="fg-line">
                                            <input data-ng-model="vm.package.detail" type="text" class="form-control" ng-disabled="vm.checkDisabled()">
                                        </div>
                                    </dd>
                                </dl>

                                <dl class="dl-horizontal">
                                    <dt class="p-t-10">Num. paquete externo</dt>
                                    <dd>
                                        <div class="fg-line">
                                            <input data-ng-model="vm.package.externalCode" type="text" class="form-control" ng-disabled="vm.checkDisabled()">
                                        </div>
                                    </dd>
                                </dl>

                                <dl class="dl-horizontal">
                                    <dt class="p-t-10">Usuario</dt>
                                    <dd>
                                        <div class="fg-line">
                                            <input data-ng-model="vm.package.user.email" type="text" class="form-control" ng-disabled="vm.checkDisabled()">
                                        </div>
                                    </dd>
                                </dl>

                                <dl class="dl-horizontal">
                                    <dt class="p-t-10">Fecha programada</dt>
                                    <dd>
                                        <div class="fg-line">
                                            <input type="datetime-local" id="scheduledDate" class="form-control" ng-model="vm.scheduledDate" ng-disabled="vm.criterioDisabledFechas()" placeholder="dd-MM-yyyyTHH:mm:ss" required />
                                        </div>
                                    </dd>
                                </dl>
                                <dl class="dl-horizontal">
                                    <dt class="p-t-10">Fecha de retiro</dt>
                                    <dd>
                                        <div class="fg-line">
                                            <input type="datetime-local" id="scheduledDateRetiro" class="form-control" ng-model="vm.scheduledDateRetiro" ng-disabled="vm.criterioDisabledFechas()" placeholder="dd-MM-yyyyTHH:mm:ss" required />
                                        </div>
                                    </dd>
                                </dl>
                                <dl class="dl-horizontal">
                                    <dt class="p-t-10">Fecha de entrega</dt>
                                    <dd>
                                        <div class="fg-line">
                                            <input type="datetime-local" id="deliveryDate" class="form-control" ng-model="vm.package.deliveryDate" ng-disabled=true placeholder="" />
                                        </div>
                                    </dd>
                                </dl>

                                <dl class="dl-horizontal col-sm-6" ng-if="vm.package.shippingScheduleOrigin">
                                    <dt class="p-t-10">Usuario origen</dt>
                                    <div class="fg-line">
                                        <input data-ng-model="vm.package.shippingScheduleOrigin.name" type="text" class="form-control" ng-disabled="vm.checkDisabled()">
                                    </div>
                                    <dl ng-show="vm.package.shippingScheduleOrigin" class="dl-horizontal">
                                        <dt class="p-t-10">Comentarios adicionales</dt>
                                        <div class="form-group fg-float">
                                            <div class="fg-line">
                                                <input type="text" class="form-control input-sm google-maps-input address-input" ng-model="vm.package.shippingScheduleOrigin.comment" autocomplete="off" ng-disabled="vm.checkDisabled()">
                                            </div>
                                        </div>
                                    </dl>
                                    <dl ng-show="vm.package.shippingScheduleOrigin" class="dl-horizontal">
                                        <dt class="p-t-10">Dirección origen</dt>
                                        <div class="form-group fg-float">
                                            <div class="fg-line">
                                                <!--<input id="origin-address" ng-blur="vm.updateAddress('origin')" type="text" class="form-control input-sm google-maps-input address-input" ng-model="vm.origin.addressInformation.address" autocomplete="off" ng-disabled="vm.checkDisabled()">-->
                                                <input-address id="origin-address" input-class="form-control input-sm google-maps-input address-input"
                                                               address="vm.origin.addressInformation.address"
                                                               location="vm.destiny.addressInformation.location"
                                                               w3w="vm.origin.addressInformation.w3w" id-w3w-container="w3w-origin-container"
                                                               ng-disabled="vm.checkDisabled()">
                                                </input-address>
                                            </div>
                                        </div>
                                    </dl>
                                    <dl ng-show="vm.package.shippingScheduleOrigin" class="dl-horizontal">
                                        <dt class="p-t-10">w3w</dt>
                                        <div class="form-group fg-float" id="w3w-origin-container">
                                            <div class="fg-line">
                                                <input id="w3w-origin-input" type="text" class="form-control input-sm" ng-model="vm.origin.addressInformation.w3w" ng-disabled="vm.checkDisabled()">
                                            </div>
                                        </div>
                                    </dl>
                                    <dl ng-show="vm.package.shippingScheduleOrigin" class="dl-horizontal">
                                        <dt class="p-t-10">Comentarios adicionales</dt>
                                        <div class="form-group fg-float">
                                            <div class="fg-line">
                                                <input type="text" class="form-control input-sm google-maps-input address-input" ng-model="vm.package.shippingScheduleOrigin.shippingAddress.comment" autocomplete="off" ng-disabled="vm.checkDisabled()">
                                            </div>
                                        </div>
                                    </dl>
                                    <dl ng-show="!vm.origin.addressInformation.immediately.status" class="dl-horizontal">
                                        <dt class="p-t-10">Fecha de origen</dt>
                                        <div class="form-group fg-float">
                                            <div class="fg-line">
                                                <input type="text" class="form-control input-sm" ng-model="vm.origin.addressInformation.immediately.date" ng-disabled="vm.checkDisabled()">
                                            </div>
                                        </div>
                                    </dl>
                                </dl>

                                <dl class="dl-horizontal" ng-class="{ 'col-sm-6': vm.package.shippingScheduleOrigin, 'col-sm-12': !vm.package.shippingScheduleOrigin }" ng-if="vm.package.shippingScheduleDestination">
                                    <dt class="p-t-10">Usuario destino</dt>
                                    <div class="fg-line">
                                        <input data-ng-model="vm.package.shippingScheduleDestination.name" type="text" class="form-control" ng-disabled="vm.checkDisabled()">
                                    </div>
                                    <dl class="dl-horizontal">
                                        <dt class="p-t-10">Comentarios adicionales</dt>
                                        <div class="form-group fg-float">
                                            <div class="fg-line">
                                                <input type="text" class="form-control input-sm google-maps-input address-input" ng-model="vm.package.shippingScheduleDestination.comment" autocomplete="off" ng-disabled="vm.checkDisabled()">
                                            </div>
                                        </div>
                                    </dl>
                                    <dl class="dl-horizontal">
                                        <dt class="p-t-10">Dirección destino</dt>
                                        <div class="form-group fg-float">
                                            <div class="fg-line">
                                                <input-address id="destiny-address" input-class="form-control input-sm google-maps-input address-input"
                                                               address="vm.destiny.addressInformation.address"
                                                               location="vm.destiny.addressInformation.location"
                                                               w3w="vm.destiny.addressInformation.w3w" id-w3w-container="w3w-destiny-container"
                                                               ng-disabled="vm.checkDisabled()">
                                                </input-address>
                                            </div>
                                        </div>
                                    </dl>
                                    <dl class="dl-horizontal">
                                        <dt class="p-t-10">w3w</dt>
                                        <div class="form-group fg-float" id="w3w-destiny-container">
                                            <div class="fg-line">
                                                <input id="w3w-destiny-input" type="text" class="form-control input-sm" ng-model="vm.destiny.addressInformation.w3w" ng-disabled="vm.checkDisabled()">
                                            </div>
                                        </div>
                                    </dl>
                                    <dl class="dl-horizontal">
                                        <dt class="p-t-10">Comentarios adicionales</dt>
                                        <div class="form-group fg-float">
                                            <div class="fg-line">
                                                <input type="text" class="form-control input-sm google-maps-input address-input" ng-model="vm.package.shippingScheduleDestination.shippingAddress.comment" autocomplete="off" ng-disabled="vm.checkDisabled()">
                                            </div>
                                        </div>
                                    </dl>
                                    <dl ng-show="!vm.destiny.addressInformation.immediately.status" class="dl-horizontal">
                                        <dt class="p-t-10">Fecha de destino</dt>
                                        <div class="form-group fg-float">
                                            <div class="fg-line">
                                                <input style="width:90%; display:inline-block" type="text" class="form-control input-sm" ng-model="vm.destiny.addressInformation.immediately.date" ng-click="vm.destiny.datepicker.open = !vm.destiny.datepicker.open" ng-disabled="vm.checkDisabled()">
                                            </div>
                                        </div>
                                    </dl>
                                </dl>

                                <dl class="dl-horizontal col-sm-10"  ng-disabled="vm.criterioDisabledSignature()">
                                    <dt class="p-t-10">Firma</dt>
                                    <div class="form-group fg-float">
                                        <div class="fg-line">
                                            <div photo-selector id-photo="signature" photo="vm.package.signatureImage" photo-name="vm.package.signatureFileName" disableSelection="true"></div>
                                        </div>
                                    </div>
                                </dl>
                                <dl class="dl-horizontal col-sm-6">
                                    <dt class="p-t-10">Aclaración</dt>
                                    <div class="form-group fg-float" ng-disabled="vm.criterioDisabledSignature()">
                                        <div class="fg-line">
                                            <input type="text" class="form-control input-sm" ng-model="vm.package.shippingScheduleDestination.destinationAclaration">
                                        </div>
                                    </div>
                                </dl>
                                <dl class="dl-horizontal col-sm-6"ng-disabled="vm.criterioDisabledSignature()">
                                    <dt class="p-t-10">DNI</dt>
                                    <div class="form-group fg-float" ng-disabled="vm.criterioDisabledSignature()">
                                        <div class="fg-line">
                                            <input type="text" class="form-control input-sm" ng-model="vm.package.shippingScheduleDestination.destinationDocNumber">
                                        </div>
                                    </div>
                                </dl>
                                <div class="dl-horizontal col-sm-12 card-body" style="overflow-y: hidden;">
                                    <div class="table-responsive">
                                        <table ng-table="vm.tableSorting" class="table table-striped table-vmiddle" ng-class="{'hide-header': !vm.package.logStatusPackages}">
                                            <tr ng-repeat="log in vm.package.logStatusPackages | orderBy: '-creationDate'">
                                                <td data-title="'Log de cambios de estado'">
                                                    {{ log.message }}
                                                </td>
                                                <td data-title="'Fecha'">
                                                    {{ log.creationDate | date: 'dd-MM-yyyy HH:mm' }}
                                                </td>
                                            </tr>
                                            <tr ng-hide="vm.package.logStatusPackages">
                                                <td colspan="2">
                                                    <div class="row">
                                                        <strong>No hay cambios de estado.</strong>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="row save-buttton-container">
                        <button class="btn btn-info back-button" ng-click="vm.goBack()">Volver</button>
                        <button class="btn btn-primary waves-effect" ng-click="vm.submit()" ng-disabled="vm.disablePackageStatus && !vm.showRateInput">Guardar</button>
                    </div>
                </data>
            </div>
        </div>
    </div>
</section>
